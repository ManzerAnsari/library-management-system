# Server App — Library Management System

Quick start
1. Copy `.env.example` to `.env` and set your values (MONGO_URI, ACCESS_TOKEN_SECRET, SESSION_SECRET, etc.).
2. Install dependencies: `npm install`.
3. Run dev server: `npm run dev` or start: `npm start`.

Notes
- Authentication: Access tokens (JWT) and refresh tokens (HTTP-only cookie) are used. Use HTTPS in production.
- Registration is email-first: `POST /api/auth/register` requires `email`, `password` and `role`; `username` is optional and will be autogenerated from the email local-part if omitted. Confirm the code with `POST /api/auth/register/verify` (email + code) — on successful verification the server will auto-login the user (returning an `accessToken` and setting the refresh cookie).
- Use `POST /api/auth/login` (email + password) to get an `accessToken` and a refresh cookie.
- Use `POST /api/auth/refresh` to rotate refresh token and obtain a new access token.
- Routes are organized under `routes/`, controllers under `controllers/`, middleware under `middleware/`, validators under `validators/`.

Suggested next work items
- Add `Book` model, request validation for user/book endpoints, and tests.
- Add CSRF protection for the refresh endpoint if you will rely on cookies for refresh.
- Add a logging/monitoring solution (e.g., Winston) for production logs.
